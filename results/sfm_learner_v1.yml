end_trigger: [150, "epoch"] # 3200 / 16 = 200 * 150 = 30000
results: results
gpus: [0, 1]
mode: Train
seed: 1

model:
  module: models.base_model
  name: LightVoxelnet_Rotate
  pretrained_model:
    path: # 1062_model.npz
    download: # https://www.dropbox.com/s/wyvfjoz9ho9q0ct/1062_model.npz
  architecture:
    k: 3 # If you want to assign number of non-empty block
    d: 10
    h: 400
    w: 352
    alpha: 1.0
    beta: 1.0
    p: 1
    aug_gt: True

dataset:
  train:
    module: datasets.kitti.kitti_raw_dataset
    name: KittiRawDataset
    args:
      data_dir: /mnt/sakuradata10-striped/datasets/KITTI_formatted
      # data_dir: /home/user/.chainer/dataset/pfnet/chainer/raw
      split: train
      seq_len: 3

  valid:
    module: datasets.kitti.kitti_raw_dataset
    name: KittiRawDataset
    args:
      data_dir: /mnt/sakuradata10-striped/datasets/KITTI_formatted
      # data_dir: /home/user/.chainer/dataset/pfnet/chainer/raw
      split: val
      seq_len: 3

updater:
  name: MultiprocessParallelUpdater

iterator:
  name: MultiprocessIterator
  train_batchsize: 2
  test_batchsize: 2
  args:
    n_processes: 2
    n_prefetch: 1
    shared_mem: 60000000

optimizer:
  name: Adam # MomentumSGD
  args:
    lr: 0.01
    momentum: 0.9
  hook:
    WeightDecay: 0.0002

extension:
  #Evaluator:
  #  name: Evaluator
  #  trigger: [1, 'epoch']
  snapshot:
      trigger: [150, "epoch"]
  snapshot_object:
      trigger: [10, "epoch"]
  LogReport:
    trigger: [1, "epoch"]
  PrintReport:
    name:
      epoch
      iteration
      main/loss
      main/prob_loss
      main/reg_loss
      lr
    trigger: [1, "epoch"]
  ProgressBar:
      update_interval: 10
  observe_lr:
